package com.liangzc.example.json_test;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import org.junit.Test;

import java.util.List;
import java.util.stream.Collectors;

public class JsonParseTest {

    public static void main(String[] args) {

        String array = "[{acctItemId=80564029, transferFee=2, transferPaidFee=0}, {acctItemId=80564030, transferFee=1, transferPaidFee=0}, {acctItemId=80564031, transferFee=1, transferPaidFee=0}, {acctItemId=80564032, transferFee=1, transferPaidFee=0}, {acctItemId=80564033, transferFee=4, transferPaidFee=0}, {acctItemId=80564034, transferFee=4, transferPaidFee=0}, {acctItemId=80564035, transferFee=12, transferPaidFee=0}, {acctItemId=80564036, transferFee=18, transferPaidFee=0}, {acctItemId=80564037, transferFee=176, transferPaidFee=0}, {acctItemId=80564038, transferFee=87, transferPaidFee=0}, {acctItemId=80564039, transferFee=39, transferPaidFee=0}, {acctItemId=80564040, transferFee=10, transferPaidFee=0}, {acctItemId=80564041, transferFee=20, transferPaidFee=0}, {acctItemId=80564042, transferFee=81, transferPaidFee=0}, {acctItemId=80564043, transferFee=68, transferPaidFee=0}, {acctItemId=80564044, transferFee=262, transferPaidFee=0}, {acctItemId=80564045, transferFee=2, transferPaidFee=0}, {acctItemId=80564046, transferFee=75, transferPaidFee=0}, {acctItemId=80564047, transferFee=85, transferPaidFee=0}, {acctItemId=80564048, transferFee=65, transferPaidFee=0}, {acctItemId=80564049, transferFee=101, transferPaidFee=0}, {acctItemId=80551719, transferFee=88866, transferPaidFee=0}, {acctItemId=80551720, transferFee=14047, transferPaidFee=0}]";


        JSONArray jsonArray = JSON.parseArray(array);
        System.out.println(jsonArray);
    }


    @Test
    public void jsonChangeTest(){
        String json = "{\"data\":{\"chargeObjectList\":[{\"chargeObjectId\":134910,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"110853\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":183193,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"141632\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":183193,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"14482\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000668,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":113295,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000667,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112922,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000665,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000664,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000100,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14383\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000027,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14383\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000094,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14383\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000028,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14383\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000578,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14383\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000633,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15498\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000634,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15499\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112913,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2018577\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":112923,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2027555\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":112924,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":232839,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"188899\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000662,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000663,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15534\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000661,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000608,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15412\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000628,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15471\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000629,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15472\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000689,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":327032,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029558\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000723,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15622\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000609,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15411\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000066,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14777\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000065,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14573\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":108289,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2012400\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000658,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000657,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112926,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":116106,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2033409\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000655,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000654,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000682,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15539\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000683,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15540\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000651,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15533\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":113296,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":113296,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"83706\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000652,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":346574,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2026331\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000530,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15122\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":346575,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2026330\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":346816,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2033422\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":346843,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2033423\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":346844,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"282117\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":112927,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000648,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15530\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000650,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15531\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112928,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000647,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000708,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15597\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000711,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15604\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000038,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14448\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000101,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15520\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000037,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"14447\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":346569,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"281517\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000696,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15558\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112917,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2026573\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":108328,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"79645\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000692,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000533,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15151\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000686,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15556\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000687,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112919,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000677,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000676,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":112920,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000674,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000673,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":316201,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2012718\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":316202,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2012679\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":112921,\"chargeObjectType\":\"PLANHOUSE\",\"customerId\":\"2029861\",\"customerType\":\"OWNER\"},{\"chargeObjectId\":6000671,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15529\",\"customerType\":\"RENTER\"},{\"chargeObjectId\":6000670,\"chargeObjectType\":\"MANAGEHOUSE\",\"customerId\":\"15532\",\"customerType\":\"RENTER\"}],\"projectId\":5000088,\"type\":\"PAYMENT_NOTICE\"}}";

        JSONObject jsonObject = JSON.parseObject(json);
        JSONArray jsonArray = jsonObject.getJSONObject("data").getJSONArray("chargeObjectList");

        System.out.println(jsonArray);
        List<ChargeObjectCustomer> chargeObjectCustomers = JSON.parseArray(jsonArray.toString(), ChargeObjectCustomer.class);

        System.out.println(chargeObjectCustomers);

        List<Long> chargeObjectIds = chargeObjectCustomers.stream().map(ChargeObjectCustomer::getChargeObjectId).collect(Collectors.toList());
        System.out.println(chargeObjectIds);
        List<Long> customerIds = chargeObjectCustomers.stream().map(ChargeObjectCustomer::getCustomerId).collect(Collectors.toList());
        System.out.println(customerIds);
    }
}
